/* 美观的prose样式，支持暗色模式 */

/* 基础样式 */
.custom-prose {
    @apply prose prose-lg mx-auto max-w-[65ch];
    color: var(--foreground);
}

/* 标题样式 */
.custom-prose :where(h1):not(:where([class~="not-prose"] *)) {
    @apply text-3xl font-bold mb-6;
    line-height: 1.3;
    color: var(--primary);
}

.custom-prose :where(h2):not(:where([class~="not-prose"] *)) {
    @apply text-2xl font-bold mt-8 mb-4;
    line-height: 1.4;
    color: var(--primary);
}

.custom-prose :where(h3):not(:where([class~="not-prose"] *)) {
    @apply text-xl font-semibold mt-6 mb-3;
    line-height: 1.5;
    color: var(--primary);
}

.custom-prose :where(h4):not(:where([class~="not-prose"] *)) {
    @apply text-lg font-semibold mt-6 mb-2;
    color: var(--primary);
}

/* 段落样式 */
.custom-prose :where(p):not(:where([class~="not-prose"] *)) {
    @apply my-4 leading-relaxed;
}

/* 链接样式 */
.custom-prose :where(a):not(:where([class~="not-prose"] *)) {
    @apply font-medium underline decoration-2 underline-offset-2 transition-colors;
    color: var(--accent-foreground);
}

.custom-prose :where(a):not(:where([class~="not-prose"] *)):hover {
    @apply no-underline;
    color: var(--primary);
}

/* 列表样式 */
.custom-prose :where(ul):not(:where([class~="not-prose"] *)) {
    @apply my-6 list-disc pl-6;
}

.custom-prose :where(ol):not(:where([class~="not-prose"] *)) {
    @apply my-6 list-decimal pl-6;
}

.custom-prose :where(li):not(:where([class~="not-prose"] *)) {
    @apply my-2;
}

/* 引用样式 */
.custom-prose :where(blockquote):not(:where([class~="not-prose"] *)) {
    @apply pl-4 italic my-6;
    border-left: 4px solid var(--primary-30);
    color: var(--muted-foreground);
}

/* 代码样式 */
.custom-prose :where(code):not(:where([class~="not-prose"] *)):not(:where(pre *)) {
    @apply rounded px-1.5 py-0.5 text-sm font-mono font-medium;
    background-color: var(--muted);
    color: var(--muted-foreground);
}

.custom-prose :where(pre):not(:where([class~="not-prose"] *)) {
    @apply my-6 overflow-x-auto rounded-lg p-4 text-sm font-mono;
    background-color: var(--muted);
}

.custom-prose :where(pre code):not(:where([class~="not-prose"] *)) {
    @apply bg-transparent p-0 text-inherit;
}

/* 表格样式 */
.custom-prose :where(table):not(:where([class~="not-prose"] *)) {
    @apply w-full my-6 border-collapse;
}

.custom-prose :where(thead):not(:where([class~="not-prose"] *)) {
    background-color: var(--muted-50);
}

.custom-prose :where(th):not(:where([class~="not-prose"] *)) {
    @apply text-left p-3 font-semibold;
    border: 1px solid var(--border);
}

.custom-prose :where(td):not(:where([class~="not-prose"] *)) {
    @apply p-3;
    border: 1px solid var(--border);
}

/* 图片样式 */
.custom-prose :where(img):not(:where([class~="not-prose"] *)) {
    @apply rounded-lg my-6 max-w-full h-auto mx-auto shadow-md;
}

/* 分隔线样式 */
.custom-prose :where(hr):not(:where([class~="not-prose"] *)) {
    @apply my-8 border-t-2;
    border-color: var(--border);
}

/* 暗色模式特定覆盖 */
.dark .custom-prose {
    @apply prose-invert;
}

.dark .custom-prose :where(a):not(:where([class~="not-prose"] *)) {
    text-decoration-color: var(--accent);
}

.dark .custom-prose :where(a):not(:where([class~="not-prose"] *)):hover {
    color: var(--accent);
}

.dark .custom-prose :where(code):not(:where([class~="not-prose"] *)):not(:where(pre *)) {
    background-color: var(--secondary);
    color: var(--secondary-foreground);
}

.dark .custom-prose :where(pre):not(:where([class~="not-prose"] *)) {
    background-color: var(--secondary);
}

.dark .custom-prose :where(blockquote):not(:where([class~="not-prose"] *)) {
    border-left-color: var(--accent-50);
    color: var(--accent-foreground-90);
}

/* 更适应暗色模式的图片 */
.dark .custom-prose :where(img):not(:where([class~="not-prose"] *)) {
    @apply opacity-90;
}